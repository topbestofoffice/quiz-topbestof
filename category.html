<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">    
  <!-- Load TboBuzz optimization layer BEFORE PubGuru -->
  <script src="js/pg-hybrid.js"></script>
  
  <!-- Load original PubGuru script with optimizations -->
  <script>
    // Preload for better performance
    // PubGuru removed - no longer needed
  </script>
    <!-- Viewport meta tag to ensure proper scaling on different devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- PRIORITY 1: Enhanced Google Ads infrastructure for fastest ad loading -->
    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="//securepubads.g.doubleclick.net">
    <link rel="dns-prefetch" href="//pagead2.googlesyndication.com" />
    <link rel="dns-prefetch" href="//googleads.g.doubleclick.net" />
    
    <!-- Preconnect -->
    <link rel="preconnect" href="//securepubads.g.doubleclick.net">
    <link rel="preconnect" href="https://pagead2.googlesyndication.com/" crossorigin />
    <link rel="preconnect" href="https://googleads.g.doubleclick.net/" crossorigin />
    <link rel="preconnect" href="https://tpc.googlesyndication.com/" crossorigin />
    
    <!-- Preload the scripts -->
    <link rel="preload" as="script" href="https://securepubads.g.doubleclick.net/tag/js/gpt.js">
    
    <!-- Title of the web page -->
    <title> Quiz Topbestof | Play Quiz game Learn & Gain Knowledge </title>
    <!-- Favicon Of Site -->
    <link rel="shortcut icon" href="images/quiz_favicon.png" type="image/x-icon">
    <!-- Link to Tailwind CSS for styling -->
    <link href="css/tailwind.min.css" rel="stylesheet">
    <!-- Link to custom CSS for additional styles -->
    <link rel="stylesheet" href="css/style.css">

    <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
</head>

<body>
    <div>
        <!-- Toast container for displaying toast notifications -->
        <div id="toast-container" class="fixed top-5 right-5 space-y-4"></div>

        <div class="mobile">
            <div class="d-flex justify-center text-center">
                <div style="width: 100%;">
                    <div data-slot-name="Topbestof_Mobile_Top" id="Topbestof_Mobile_Top"></div>
                </div>
                <div class=" grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-2 gap-0 lg:gap-0 ">
                    <!-- Logo section -->
                    <div class="col-auto">
                        <img src="images/logo.png" alt="Logo" class="px-2">
                    </div>
                    <!-- Lottie animation for reward ad -->
                    <div class="flex justify-end items-center col-span-3">
                        <div onclick="RewardAd()" id="lottie-container" class="inline-block"
                            style="width: 40px; height: 40px;">
                            <img src="images/Reward.png" alt="Reward">
                        </div>
                    </div>
                    <!-- User wallet display -->
                    <div class="user_wallet text-sm font-semibold flex justify-end items-center col-end-6 mr-3">
                        <span class="rounded-full px-3 me-2"><strong id="total_coins"></strong> <i
                                class="fa-solid fa-coins" style="color: #FFD43B;"></i> </span>
                    </div>
                </div>
            </div>
            <!-- Categories section -->
            <div class="first_layer_home text-center p-2 mt-3">
                <div style="width: 100%;">
                </div>
                <div class="grid grid-flow-row-dense grid-cols-3 grid-rows-3 gap-3" id="categories">
                    <!-- Here's category content  -->
                </div>

                <!-- Subcategories section -->
                <div class="row" id="sub_categories">
                    <!-- Subcategories content will be dynamically inserted here -->
                </div>
            </div>

        </div>

        <!-- Bottom navigation bar -->
        <div class="sticky bottom-0">
            <div class=" m-auto  left-0 z-50 w-full h-16 bg-white bottom_bar"
                style="background-color: #454545; border-radius: 14px 14px 0 0; box-shadow: #1a1a1a 0px -10px 10px;">
                <div class="grid h-full max-w-lg grid-cols-3 mx-auto">
                    <!-- Category button -->
                    <button type="button" onclick="window.location.href='category.html'"
                        class="inline-flex flex-col items-center justify-center font-medium px-5 group"
                        style="background-color: #454545; border-radius: 14px 14px 0 0; box-shadow: #1a1a1a  0px 0px 19px">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M4 6C4 5.46957 4.21071 4.96086 4.58579 4.58579C4.96086 4.21071 5.46957 4 6 4H8C8.53043 4 9.03914 4.21071 9.41421 4.58579C9.78929 4.96086 10 5.46957 10 6V8C10 8.53043 9.78929 9.03914 9.41421 9.41421C9.03914 9.78929 8.53043 10 8 10H6C5.46957 10 4.96086 9.78929 4.58579 9.41421C4.21071 9.03914 4 8.53043 4 8V6ZM14 6C14 5.46957 14.2107 4.96086 14.5858 4.58579C14.9609 4.21071 15.4696 4 16 4H18C18.5304 4 19.0391 4.21071 19.4142 4.58579C19.7893 4.96086 20 5.46957 20 6V8C20 8.53043 19.7893 9.03914 19.4142 9.41421C19.0391 9.78929 18.5304 10 18 10H16C15.4696 10 14.9609 9.78929 14.5858 9.41421C14.2107 9.03914 14 8.53043 14 8V6ZM4 16C4 15.4696 4.21071 14.9609 4.58579 14.5858C4.96086 14.2107 5.46957 14 6 14H8C8.53043 14 9.03914 14.2107 9.41421 14.5858C9.78929 14.9609 10 15.4696 10 16V18C10 18.5304 9.78929 19.0391 9.41421 19.4142C9.03914 19.7893 8.53043 20 8 20H6C5.46957 20 4.96086 19.7893 4.58579 19.4142C4.21071 19.0391 4 18.5304 4 18V16ZM14 16C14 15.4696 14.2107 14.9609 14.5858 14.5858C14.9609 14.2107 15.4696 14 16 14H18C18.5304 14 19.0391 14.2107 19.4142 14.5858C19.7893 14.9609 20 15.4696 20 16V18C20 18.5304 19.7893 19.0391 19.4142 19.4142C19.0391 19.7893 18.5304 20 18 20H16C15.4696 20 14.9609 19.7893 14.5858 19.4142C14.2107 19.0391 14 18.5304 14 18V16Z"
                                fill="#ffff" stroke="#ffff" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                        <span class="text-sm">Category</span>
                    </button>
                    <!-- Home button -->
                    <button type="button" onclick="window.location.href='home.html'"
                        class="inline-flex flex-col items-center justify-center font-medium px-5  group">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 20 20"
                            stroke="currentColor" stroke-width="2" stroke-linejoin="round">
                            <path
                                d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                            </path>
                        </svg>
                        <span class="text-sm">Home</span>
                    </button>
                    <!-- Profile button -->
                    <button type="button" onclick="window.location.href='profile.html'"
                        class="inline-flex flex-col items-center justify-center font-medium px-5  group">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path
                                d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                                stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <span class="text-sm">Profile</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="data/category.js"></script>
    <script>
        function showToast(e) {
            // Check debug setting and return early if debug is false
            const config = window.AdSystemConfig;
            if (config && config.debug === false) {
              console.log("[Toast-Debug-Off]", e.title, "-", e.msg);
              return;
            }
            
            // Create the toast element
            const toast = document.createElement('div');
            toast.className = 'max-w-xs  border border-gray-200 p-4 rounded shadow-lg flex items-center space-x-4';
            toast.innerHTML = `
            <div class="flex-shrink-0">
              <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7 12l5 5L21 7" />
              </svg>
            </div>
            <div>
              <p class="text-sm font-semibold">${e.title}</p>
              <p class="text-sm">${e.msg}</p>
            </div>
          `;
            // Append the toast to the container
            document.getElementById('toast-container').appendChild(toast);
            // Automatically remove the toast after 3 seconds
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        function RewardAd() {
            // Show rewarded ad using TboBuzz hybrid system
            if (typeof TboBuzzRewards !== 'undefined' && TboBuzzRewards.show) {
                TboBuzzRewards.show({
                    onAdClosed: function(reward) {
                        if (reward && reward.type === 'reward' && reward.amount > 0) {
                            // Reward granted
                            console.log('Reward granted:', reward.amount);
                            localStorage.totalcoin = parseInt(localStorage.getItem('totalcoin') || '0') + 100;
                            showToast({ title: "Congratulation!", msg: "ðŸ¥³ Reward Added" });
                            setTimeout(closereward, 1000);
                        }
                    },
                    onAdFailedToShow: function(error) {
                        console.log('Ad failed to show:', error);
                        // Fallback to Google AdSense
                        showAdSenseReward();
                    }
                });
            } else {
                // Fallback to original AdSense system
                showAdSenseReward();
            }
        }

        function showAdSenseReward() {
            if (typeof adBreak !== 'undefined') {
                adBreak({
                    type: 'reward',           // The type of this placement
                    name: 'game_started',    // A descriptive name for this placement
                    beforeReward: (showAdFn) => { console.log("beforeReward ") + showAdFn(0) },
                    adDismissed: () => { console.log("adDismissed"); },
                    adViewed: () => { console.log("adViewed"); },
                    adBreakDone: (placementInfo) => {
                        console.log(placementInfo.breakStatus);
                        if (placementInfo.breakStatus == "viewed") {
                            localStorage.totalcoin = 100
                            showToast({ title: "Congratulation!", msg: "ðŸ¥³ Reward Added" })
                            localStorage.totalcoin =
                                setTimeout(closereward, 1000)
                        } else {
                            showToast({ title: "Sorry!", msg: "ðŸš«Reward Ad Not available" })
                        }
                    },
                });
            } else {
                showToast({ title: "Sorry!", msg: "ðŸš« No ad system available" });
            }
        }
        let allcoins = localStorage.getItem('totalcoin');
        document.getElementById('total_coins').innerText = allcoins
    </script>
    <!-- jQuery library - moved to bottom for better performance -->
    <script defer src="js/jquery-3.6.4.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4TSLVVBZB5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4TSLVVBZB5');
</script>
<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '2269043296918674');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=2269043296918674&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->
</body>
</html>


