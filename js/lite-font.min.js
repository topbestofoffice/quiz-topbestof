window.AdSystemConfig={enableBotProtection:!0,botDetectionRegex:/bot|googlebot|crawler|spider|robot|crawling|facebookexternalhit|lighthouse|headless|phantom|selenium|webdriver|automation|scrapy|python-requests|curl|wget|postman/i,allowCrawlers:!1,requireUserInteraction:!0,enableLazyLoading:!0,lazyLoading:{enabled:!0,depth:1.75,fetchMargin:"200px",renderMargin:75,mobileScaling:2,viewabilityThreshold:.75},enableRebid:!1,rebidSystem:{enabled:!1,rounds:2,multiplier:.7,percent:1,timeout:1e3,maxAttempts:3},enableVignette:!0,vignetteAds:{enabled:!0,chance:.3,delay:1e4,cooldown:3e5,desktopEnabled:!0,mobileEnabled:!0,closeTimeout:"1/24",requireInteraction:!0},enableOfferwall:!1,offerwallSystem:{enabled:!1,durationThreshold:30,pageviewThreshold:3,showOnExit:!0,rewardMultiplier:1.5,cooldownHours:24},enableRewardedAds:!0,rewardedAds:{enabled:!0,rewardAmount:100,currency:"coins",bonusMultiplier:1.2,maxDailyRewards:10,videoTimeout:3e4,skipDelay:5e3,autoRedirect:!0,redirectDelay:500,initializationDelay:2500},performance:{enableSingleRequest:!0,collapseEmptyDivs:!0,timeout:2e3,refreshEnabled:!1,refreshMax:0,refreshTimeout:90,refreshViewports:.75,scrollViewability:!0,scrollViewabilityTimeout:1e3,unitMinHeight:!0,unitAutoMargin:!0,unitCenter:!0,optimizeSizes:!0,pendingSlotDelay:1500},debug:!1,networkCode:"22760191030",publisherName:"Chandra Prakash Verma",domain:"topbestof.com",currency:"USD",mobileOptimized:!0,mobileBreakpoint:768,enableAnchorAds:!1,anchorAds:{enabled:!1,position:"bottom",delay:0,device:"both",closeButton:!0,closeTimeout:"1/24",percent:1},adUnits:[{slotName:"Topbestof_Desk_Leaderboard",adUnitPath:"/22760191030/soner",device:"desktop",sizes:[[728,90],[970,90],[970,250],[728,250],[750,300]],priority:"medium",position:"content",isLazy:!1,isAnchor:!1,targeting:{},customCss:""},{slotName:"Topbestof_Desk_Incontent_Lazy",adUnitPath:"/22760191030/Topbestof_Desk_Incontent_Lazy",device:"desktop",sizes:[[300,250],[336,280],[728,90]],priority:"medium",position:"content",isLazy:!0,isAnchor:!1,targeting:{},customCss:""},{slotName:"Topbestof_Mobile_Leaderboard",adUnitPath:"/22760191030/soner",device:"mobile",sizes:[[300,250],[336,280],[320,100],[250,250],[300,600],"fluid"],priority:"medium",position:"content",isLazy:!1,isAnchor:!1,targeting:{},customCss:""},{slotName:"Topbestof_Mobile_Top",adUnitPath:"/22760191030/rtop",device:"mobile",sizes:[[300,250],[336,280],[320,100],[250,250],[300,600],"fluid"],priority:"high",position:"header",isLazy:!1,isAnchor:!1,targeting:{},customCss:""}],callbacks:{onAdLoaded:function(e,o,t){try{const n=window.AdSystemConfig;if(!n||"object"!=typeof n)return void console.warn("[AdSystem] AdSystemConfig not available in onAdLoaded");n.debug&&console.log(`[AdSystem] Ad loaded: ${e} (${o?o[0]+"x"+o[1]:"unknown"}) - Empty: ${t}`)}catch(e){console.warn("[AdSystem] Error in onAdLoaded:",e)}},onAdFailed:function(e,o,t){window.AdSystemConfig.debug&&console.warn(`[AdSystem] Ad failed: ${e} (Attempt ${t})`,o)},onAdEmpty:function(e){window.AdSystemConfig.debug&&console.log(`[AdSystem] Ad empty: ${e}`)},onAdViewable:function(e,o){window.AdSystemConfig.debug&&console.log(`[AdSystem] Ad viewable: ${e}`,o)},onRewardGranted:function(e,o,t){const n=window.AdSystemConfig,i=parseInt(localStorage.getItem("totalcoin")||"0"),r=t?Math.floor(e*n.rewardedAds.bonusMultiplier):e,a=i+r;localStorage.setItem("totalcoin",a.toString());const d=(new Date).toDateString(),s=JSON.parse(localStorage.getItem("dailyRewards")||"{}");s[d]=(s[d]||0)+1,localStorage.setItem("dailyRewards",JSON.stringify(s)),window.showToast&&window.showToast({title:"Reward Earned!",msg:`ðŸŽ‰ You earned ${r} ${o}! ${t?"(Bonus Applied!)":""}`}),n.rewardedAds.autoRedirect&&setTimeout(()=>{"/playquiz.html"!==window.location.pathname&&(window.location.href="/playquiz.html")},n.rewardedAds.redirectDelay)},onRewardFailed:function(e,o,t){console.error("[AdSystem] Reward failed:",e,t),window.showToast&&window.showToast({title:"Ad Not Available",msg:`âŒ ${e||"Please try again later"}`})},onRewardRequested:function(e,o){window.AdSystemConfig.debug&&console.log("[AdSystem] Reward requested:",e,o)},onRewardAdLoaded:function(e,o){window.AdSystemConfig.debug&&console.log("[AdSystem] Reward ad loaded:",e,o+"ms")},onRewardAdStarted:function(e,o){window.AdSystemConfig.debug&&console.log("[AdSystem] Reward ad started:",e,o+"ms")},onRewardAdCompleted:function(e,o,t){window.AdSystemConfig.debug&&console.log("[AdSystem] Reward ad completed:",e,o+"ms","Skipped:",t)},onVignetteShown:function(e){window.AdSystemConfig.debug&&console.log("[AdSystem] Vignette shown:",e)},onVignetteClosed:function(e,o){window.AdSystemConfig.debug&&console.log("[AdSystem] Vignette closed:",e+"ms",o)},onVignetteError:function(e,o){console.error("[AdSystem] Vignette error:",e.message||e,o)},onVignetteEligibilityCheck:function(e,o,t){try{const n=window.AdSystemConfig||this;if(!n)return void console.warn("[AdSystem] Config not available in vignette eligibility check");if(n.debug){const i=n.vignetteAds&&"object"==typeof n.vignetteAds?n.vignetteAds:{chance:.3,delay:1e4,cooldown:3e5,requireInteraction:!0};console.log("[AdSystem] Vignette eligibility:",e,o,t,i)}}catch(e){console.error("[AdSystem] Vignette eligibility callback error:",e)}},onBotDetected:function(e,o){window.AdSystemConfig.debug&&console.warn("[AdSystem] Bot detected:",e,o)},onSuspiciousActivity:function(e,o){window.AdSystemConfig.debug&&console.warn("[AdSystem] Suspicious activity:",e,o)},onPerformanceData:function(e){window.AdSystemConfig.debug&&console.log("[AdSystem] Performance metrics:",e)},onError:function(e,o,t){(window.AdSystemConfig.debug||t)&&console.error(`[AdSystem] Error in ${o}:`,e)}},detectBot:function(){const e=window.AdSystemConfig;if(!e.enableBotProtection)return!1;const o=navigator.userAgent||"",t=[];e.botDetectionRegex&&e.botDetectionRegex.test(o)&&t.push(`UserAgent matched bot pattern: "${o}"`),!0===navigator.webdriver&&t.push("Detected: WebDriver"),(window.callPhantom||window._phantom)&&t.push("Detected: PhantomJS");const n=t.length>0;if(n&&e.callbacks&&e.callbacks.onBotDetected)try{e.callbacks.onBotDetected(t.join(" | "),o)}catch(e){console.error("[BotDetection] Error in callback:",e)}return n},getDailyRewardsStatus:function(){const e=window.AdSystemConfig,o=(new Date).toDateString(),t=JSON.parse(localStorage.getItem("dailyRewards")||"{}")[o]||0;return{today:o,todayCount:t,maxDaily:e.rewardedAds.maxDailyRewards,remaining:Math.max(0,e.rewardedAds.maxDailyRewards-t),canEarnMore:t<e.rewardedAds.maxDailyRewards}},checkRewardEligibility:function(){const e=window.AdSystemConfig.getDailyRewardsStatus(),o=window.userHasInteracted||!1,t=navigator.onLine;return{eligible:e.canEarnMore&&o&&t,reasons:{dailyLimit:!e.canEarnMore,userInteraction:!o,offline:!t},dailyStatus:e}},getVignetteStatus:function(){const e=window.AdSystemConfig,o=Date.now(),t=parseInt(localStorage.getItem("lastVignetteShown")||"0"),n=o-t,i=e.vignetteAds||{},r=i.cooldown||3e4,a=i.chance||.3,d=n>=r;return{lastShown:new Date(t).toISOString(),timeSinceLastShown:n,cooldownRequired:r,cooldownPassed:d,canShow:d&&Math.random()<=a}}},window.AdManager=function(){"use strict";let e=!1,o=!1,t={},n=[],i=null;function r(){return e?Promise.resolve():window.gptServicesEnabled?(e=!0,Promise.resolve()):(window.googletag=window.googletag||{cmd:[]},i=window.AdSystemConfig,i?i.enableBotProtection&&i.detectBot()?(console.error("[AdManager] Bot detected - Ads blocked"),window.isBotTraffic=!0,Promise.reject(new Error("Bot traffic detected"))):(window.isBotTraffic=!1,(o?Promise.resolve():new Promise((e,t)=>{if(window.googletag&&window.googletag.pubads)return o=!0,void e();const n=document.createElement("script");n.async=!0,n.src="https://securepubads.g.doubleclick.net/tag/js/gpt.js",n.crossOrigin="anonymous",n.onload=()=>{o=!0,e()},n.onerror=e=>{console.error("[AdManager] Failed to load GPT:",e),t(e)},document.head.appendChild(n)})).then(()=>new Promise(e=>{!function o(){window.googletag&&window.googletag.pubads?e():setTimeout(o,100)}()})).then(()=>new Promise(o=>{googletag.cmd.push(()=>{try{if(!window.gptServicesEnabled){const e=window.innerWidth<=i.mobileBreakpoint;googletag.setConfig({targeting:{device:e?"mobile":"desktop"},singleRequest:i.performance.enableSingleRequest,collapseDiv:i.performance.collapseEmptyDivs?"BEFORE_FETCH":null}),googletag.enableServices(),window.gptServicesEnabled=!0}e=!0,o()}catch(e){console.error("[AdManager] GPT initialization failed:",e),reject(e)}})}))):(console.error("[AdManager] AdSystemConfig not found"),Promise.reject(new Error("AdSystemConfig not found"))))}function a(o,r,a,d={}){if(t[a])return Promise.resolve(t[a]);const s=document.getElementById(a)||document.querySelector(`[data-slot-name="${a}"]`);return s?(s.id||(s.id=a),new Promise((i,s)=>{if(!e)return void n.push({adUnitPath:o,sizes:r,divId:a,options:d,resolve:i,reject:s});const l=googletag.sizeMapping().addSize([992,0],[[728,90],[970,90],[970,250],[728,250],[750,300],[300,250],[336,280]]).addSize([768,0],[[728,90],[300,250],[336,280],[300,600],[320,100]]).addSize([414,0],[[300,250],[336,280],[320,100],[300,600],[250,250]]).addSize([320,0],[[300,250],[336,280],[320,100],[250,250],[300,600],[320,50]]).addSize([0,0],[[320,50],[300,250]]).build();googletag.cmd.push(()=>{try{const e=googletag.defineSlot(o,r,a);if(e)e.addService(googletag.pubads()),e.defineSizeMapping(l),d.targeting&&Object.entries(d.targeting).forEach(([o,t])=>{e.setTargeting(o,t)}),t[a]=e,i(e);else{const e=`Failed to define slot: ${a}`;console.error("[AdManager]",e),s(new Error(e))}}catch(e){console.error("[AdManager] Error defining slot:",a,e),s(e)}})})):(i&&i.debug&&console.error("[AdManager] Element not found:",a),Promise.reject(new Error(`Element not found: ${a}`)))}function d(o,t={}){return document.getElementById(o)||document.querySelector(`[data-slot-name="${o}"]`)?new Promise((t,n)=>{if(!e)return console.error("[AdManager] Cannot display ad - not initialized:",o),void n(new Error("AdManager not initialized"));googletag.cmd.push(()=>{try{googletag.display(o),t()}catch(e){console.error("[AdManager] Error displaying ad:",o,e),n(e)}})}):(i&&i.debug&&console.error("[AdManager] Element not found for display:",o),Promise.reject(new Error(`Element not found: ${o}`)))}return{init:r,initializeAds:function(){if(i||(i=window.AdSystemConfig),!i)return void console.error("[AdManager] AdSystemConfig not available");if(i.enableBotProtection&&i.detectBot())return console.error("[AdManager] Bot traffic - Aborting initialization"),void(window.isBotTraffic=!0);window.isBotTraffic=!1;const e=window.innerWidth<=i.mobileBreakpoint?"mobile":"desktop",o=i.adUnits.filter(o=>o.device===e||"both"===o.device),t=o.filter(e=>e.slotName.includes("Leaderboard")),s=o.filter(e=>!e.slotName.includes("Leaderboard"));t.forEach(e=>{n.push({adUnitPath:e.adUnitPath,sizes:e.sizes,divId:e.slotName,options:{targeting:e.targeting||{}},resolve:()=>{i.debug&&console.log("[AdManager] Leaderboard slot queued:",e.slotName)},reject:o=>console.error("[AdManager] Pending slot rejected:",e.slotName,o)})}),r().then(()=>{const e=s.map(e=>a(e.adUnitPath,e.sizes,e.slotName,{targeting:e.targeting||{}}).then(o=>d(e.slotName)).catch(o=>{i.debug&&console.error("[AdManager] Failed to initialize:",e.slotName,o)}));return Promise.allSettled(e)}).catch(e=>{console.error("[AdManager] Critical initialization error:",e)})},defineSlot:a,displayAd:d,refreshAd:function(e){const o=t[e];return o?new Promise((t,n)=>{googletag.cmd.push(()=>{try{googletag.pubads().refresh([o]),t()}catch(o){console.error("[AdManager] Error refreshing ad:",e,o),n(o)}})}):(console.error("[AdManager] Cannot refresh undefined slot:",e),Promise.reject(new Error(`Slot not defined: ${e}`)))},destroySlot:function(e){const o=t[e];o?googletag.cmd.push(()=>{try{googletag.destroySlots([o]),delete t[e]}catch(o){console.error("[AdManager] Error destroying slot:",e,o)}}):console.warn("[AdManager] Cannot destroy undefined slot:",e)},getSlotInfo:function(e){const o=t[e];return o?{slotId:o.getSlotElementId(),adUnitPath:o.getAdUnitPath(),sizes:o.getSizes(),targeting:o.getTargeting()}:null},getStatus:function(){return{isInitialized:e,gptLoaded:o,definedSlotsCount:Object.keys(t).length,pendingSlotsCount:n.length,definedSlots:Object.keys(t)}},processPendingSlots:function(){const e=[...n];n=[],e.forEach(({adUnitPath:e,sizes:o,divId:t,options:n,resolve:i,reject:r})=>{a(e,o,t,n).then(e=>d(t)).then(()=>{i&&i()}).catch(e=>{console.error("[AdManager] Error processing pending slot:",t,e),r&&r(e)})})}}}(),function(){function e(){window.AdSystemConfig?window.AdManager.initializeAds():setTimeout(e,100)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();